2. PERSONALIZED PRODUCTS LIST – CÁCH HIỂU & LOGIC
================================================================================

2.1. Ràng buộc bắt buộc (strict)
--------------------------------------------------------------------------------
Tất cả sản phẩm trong personalized list phải có articleType trùng với 
articleType của product_id đầu vào.


2.2. Các tiêu chí ưu tiên (ranking / scoring)
--------------------------------------------------------------------------------
Sau khi đã filter theo articleType, ta ranking sản phẩm theo các yếu tố sau 
(có trọng số):

a) Interaction_type: ưu tiên theo mức độ quan trọng, ví dụ:
   - purchase > cart > like > view (hoặc một thứ tự tương tự).

b) Gender của product so với gender + age của user (xem mapping chi tiết bên dưới).

c) Usage: mức độ phù hợp về ngữ cảnh sử dụng (Casual, Sport, Party,…).


2.3. Mapping ưu tiên về gender theo tuổi & giới tính user
--------------------------------------------------------------------------------

Nếu user.age < 13:
  - user.gender = "male" → ưu tiên sản phẩm có gender = "Boys".
  - user.gender = "female" → ưu tiên sản phẩm có gender = "Girls".

Nếu user.age ≥ 13:
  - user.gender = "male" → ưu tiên sản phẩm có gender = "Men".
  - user.gender = "female" → ưu tiên sản phẩm có gender = "Women".

Gender Unisex:
  - Sản phẩm gender = "Unisex" nên được đề xuất cho user có age ≥ 13 
    (như một lớp ưu tiên tiếp theo).


2.4. Kết luận: Personalized list
--------------------------------------------------------------------------------
Bước 1: Filter articleType = articleType của product đầu vào.

Bước 2: Tính điểm (score) dựa trên interaction_type, gender (theo mapping), 
        usage,…

Bước 3: Sort theo score, cắt theo số lượng product hiển thị mà người dùng chọn.


================================================================================
3. OUTFIT LIST – CÁCH HIỂU & CẤU TRÚC 1 BỘ OUTFIT
================================================================================

3.1. Định nghĩa Outfit
--------------------------------------------------------------------------------
Mỗi outfit là một tập hợp item, trong đó bắt buộc phải có product đầu vào 
(product_id ban đầu).


3.2. Cấu trúc một outfit "đạt chuẩn"
--------------------------------------------------------------------------------

A. Accessories (bắt buộc có 1 item):
   - masterCategory = "Accessories"
   - subCategory chọn 1 trong các giá trị sau:
     * "Bags"
     * "Belts"
     * "Headwear"
     * "Watches"

B. Apparel (quần áo):
   - masterCategory = "Apparel"
   
   Bắt buộc:
   - subCategory = "Bottomwear"
     * Chọn articleTypes phù hợp với giới tính của User.
   
   - subCategory = "Topwear"
     * Chọn articleTypes phù hợp với giới tính của User.
   
   Tùy chọn:
   - subCategory = "Dress" 
     * Chỉ nên gợi ý nếu user.gender là nữ.
   
   - subCategory = "Innerwear" 
     * Tùy chọn, có thể dựa thêm vào context/usage.

C. Footwear (giày dép) – bắt buộc có 1 item:
   - masterCategory = "Footwear"
   - subCategory chọn 1 trong 3:
     * "Shoes"
     * "Sandal"
     * "Flip Flops"


3.3. Điều kiện thêm về usage trong outfit
--------------------------------------------------------------------------------
Tất cả product trong cùng một outfit (Accessories, Apparel, Footwear, 
product đầu vào…) nên có cùng giá trị usage.

Điều này giúp outfit "đồng bộ" về ngữ cảnh (ví dụ: tất cả đều là Sport, 
hoặc Casual, v.v.).


================================================================================
TÓM TẮT QUY TRÌNH
================================================================================

PERSONALIZED PRODUCTS LIST:
1. Filter: articleType = articleType của product đầu vào (STRICT)
2. Scoring: Tính điểm dựa trên interaction_type, gender mapping, usage
3. Ranking: Sort theo score và cắt theo top-K

OUTFIT LIST:
1. Bắt buộc: Product đầu vào phải có trong outfit
2. Cấu trúc:
   - Accessories (1 item): Bags/Belts/Headwear/Watches
   - Apparel: Bottomwear + Topwear (bắt buộc), Dress (nữ), Innerwear (tùy chọn)
   - Footwear (1 item): Shoes/Sandal/Flip Flops
3. Điều kiện: Tất cả items trong outfit phải có cùng usage